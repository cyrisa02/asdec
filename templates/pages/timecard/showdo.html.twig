{% extends 'base.html.twig' %}

{% block title %}Fiche d'appel
{% endblock %}

{% block body %}
	<div class="mt-4 container">
		<h1>Fiche d'appel:
			{% for sport in timecard.sports %}
				{{ sport.title}}
			{% endfor %}
			-
			{{ timecard.responsable }}

		</h1>
		<p>Date:
			{{ timecard.CreatedAt ? timecard.CreatedAt|date('d-m-Y') : '' }}</p>

		<table class="table">
			<thead>
				<tr>
					<th>N°</th>
					<th>Nom</th>
					<th>Présent</th>
					<th>Présent nouvelle
					</th>

				</tr>
			</thead>
			<tbody>
				{% for sport in timecard.sports %}
					{% for user in sport.users %}

						<tr>
							<td>{{ user.id }}</td>

							<td>{{ user.name }}</td>
							<td>{{ user.IsPresent ? 'Payé' : 'Reste à payer' }}</td>

							<td>
								{% for presence in user.presences %}
									{{ presence.IsPresent ? 'Présent' : 'Absent' }}

									<a class="btn btn-secondary btn-lg mb-4" href="{{ path('app_lessons_end', {'id': lesson.id}) }}">{{ isEnded ? 'La leçon est terminée' : 'La leçon est en cours'}}</a>

								{% endfor %}
							</td>


						</tr>
					{% endfor %}
				{% else %}
					<tr>
						<td colspan="15">Pas d'utilistateur</td>
					</tr>

				{% endfor %}

			</tbody>


			<table class="table">
				<tbody>
					<tr>
						<th>N°</th>
						<td>{{ timecard.id }}</td>
					</tr>
					<tr>
						<th>Responsable</th>
						<td>{{ timecard.responsable }}</td>
					</tr>
					<tr>
						<th>Date</th>
						<td>{{ timecard.CreatedAt ? timecard.CreatedAt|date('d-m-Y') : '' }}</td>
					</tr>
				</tbody>
			</table>


			<a href="{{ path('app_timecard_index') }}">Retour à la liste</a>

			<a href="{{ path('app_timecard_edit', {'id': timecard.id}) }}">Modifier</a>

			{{ include('pages/timecard/_delete_form.html.twig') }}</div>

	{% endblock %}
