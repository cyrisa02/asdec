{% extends 'base.html.twig' %}

{% block title %}Fiche d'appel
{% endblock %}

{% block body %}
	<div class="mt-4 container">
		<h1>Fiche d'appel:
			{{ timecard1.sports.title }}
			{{ timecard1.sports.id }}

			-
			{{ timecard1.responsable }}

		</h1>
		<p>Date:
			{{ timecard1.CreatedAt ? timecard1.CreatedAt|date('d-m-Y') : '' }}</p>

		<table class="table">
			<thead>
				<tr>
					<th>N°</th>
					<th>Nom</th>
					<th>Présent</th>
					<th>Photo</th>
				</tr>
			</thead>
			<tbody>
				{# {% for sport in sports %} #}
				{% for user in timecard1.sports.users %}
					<tr>
						<td>{{ user.id }}</td>
						<td>{{ user.name }}</td>
						<td>
							{% for presence1 in user.presence1s %}

								{# {{ presence.IsPresent ? 'Présent' : 'Absent' }} #}
								{% set deactiver = 'background-color: #CB3D3F' %}
								{% set activer = 'background-color: #2F7A4D' %}
								<a class="btn text-light me-3 ms-3" style="{{ presence1.isisPresent ? activer : deactiver }}" href="{{ path('app_salle_valide', {'id': presence1.id, 'page': app.request.get('page') ? app.request.get('page') : 1}) }}">

									{{ presence1.isisPresent ? 'Présent' : 'Absent' }}</a>

							{% endfor %}
						</td>
						<td>
							{% if user.picture is defined %}
								<img src="{{ asset('uploads/') }}{{ user.picture }}" alt="{{ user.name }}" style="max-width: 5rem; height: auto; border-radius: 50%;">
							{% else %}
								<p>Pas de photo</p>
							{% endif %}
						</td>
					</tr>
					{# {% endfor %} #}
				{% else %}
					<tr>
						<td colspan="15">Pas d'utilistateur</td>
					</tr>

				{% endfor %}

			</tbody>


			<table class="table">
				<tbody>
					<tr>
						<th>N°</th>
						<td>{{ timecard1.id }}</td>
					</tr>
					<tr>
						<th>Responsable.</th>
						<td>{{ timecard1.responsable }}</td>
					</tr>
					<tr>
						<th>Date</th>
						<td>{{ timecard1.CreatedAt ? timecard1.CreatedAt | date('d-m-Y') : '' }}</td>
					</tr>
				</tbody>
			</table>


			<a href="{{ path('app_timecard1_index') }}">Retour à la liste</a>

			<a href="{{ path('app_timecard1_edit', {'id': timecard1.id}) }}">Modifier</a>

			{{ include('pages/timecard1/_delete_form.html.twig') }}</div>

	{% endblock %}
